[
{
	"uri": "//localhost:1313/vi/",
	"title": "Compliance Analytics Platform với Automated Reporting",
	"tags": [],
	"description": "",
	"content": "Compliance Analytics Platform với Automated Reporting Tổng quan Bài lab này hướng dẫn triển khai từng bước (step-by-step) một Compliance Analytics Platform with Automated Reporting trên AWS Mục tiêu:\nTriển khai pipeline ingest audit logs (CloudTrail/Config/GuardDuty) → phân tích (Audit Processor, Risk Engine) → lưu kết quả (DynamoDB/S3) → xuất báo cáo (Athena / QuickSight) → theo dõi \u0026amp; cảnh báo (CloudWatch / SNS). Phạm vi lab: thiết lập hạ tầng bằng Console \u0026amp; CLI, triển khai Lambda skeleton, cấu hình Glue/Athena, QuickSight dashboard, EventBridge rule và alerts.\nSecurity Objectives Thiết lập mô hình phân quyền theo least privilege cho Lambda / QuickSight / Athena.\nGhi nhận đầy đủ audit trail cho mọi thay đổi hạ tầng (CloudTrail + AWS Config).\nMã hóa dữ liệu at-rest (S3/DynamoDB) và in-transit (HTTPS).\nPro Tips Dùng IAM Roles cho Lambda và QuickSight thay vì embed credentials.\nEnable S3 Versioning cho buckets lưu logs để truy xuất thay đổi lịch sử.\nNếu chưa có dữ liệu thực tế, mock CloudTrail events để test flow.\nBắt đầu với rule-based risk scoring trước khi deploy ML (SageMaker).\nImportant Note Luôn kiểm tra và giới hạn quyền IAM trước khi chạy lambda trên account production. Đối với workshop, có thể dùng account dev/test để tránh tác động ngoài ý muốn.\nNội dung Giới thiệu Các bước chuẩn bị Tạo S3 Buckets (Logs \u0026amp; Reports) Bật CloudTrail, AWS Config, GuardDuty Tạo DynamoDB Tables Thiết lập Glue Crawler \u0026amp; Athena Tạo IAM Roles \u0026amp; Policies Viết \u0026amp; Deploy Lambda functions Thiết lập EventBridge rules CloudWatch Metrics, Alarms \u0026amp; SNS QuickSight — Tạo Dashboard Frontend (ReactJS) Deployment Testing \u0026amp; Validation Dọn dẹp tài nguyên "
},
{
	"uri": "//localhost:1313/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Overview Bài lab này hướng dẫn triển khai từng bước (step-by-step) một Compliance Analytics Platform with Automated Reporting trên AWS Mục tiêu:\nTriển khai pipeline ingest audit logs (CloudTrail/Config/GuardDuty) → phân tích (Audit Processor, Risk Engine) → lưu kết quả (DynamoDB/S3) → xuất báo cáo (Athena / QuickSight) → theo dõi \u0026amp; cảnh báo (CloudWatch / SNS). Phạm vi lab: thiết lập hạ tầng bằng Console \u0026amp; CLI, triển khai Lambda skeleton, cấu hình Glue/Athena, QuickSight dashboard, EventBridge rule và alerts.\nSecurity Objectives Thiết lập mô hình phân quyền theo least privilege cho Lambda / QuickSight / Athena.\nGhi nhận đầy đủ audit trail cho mọi thay đổi hạ tầng (CloudTrail + AWS Config).\nMã hóa dữ liệu at-rest (S3/DynamoDB) và in-transit (HTTPS).\nPro Tips Dùng IAM Roles cho Lambda và QuickSight thay vì embed credentials.\nEnable S3 Versioning cho buckets lưu logs để truy xuất thay đổi lịch sử.\nNếu chưa có dữ liệu thực tế, mock CloudTrail events để test flow.\nBắt đầu với rule-based risk scoring trước khi deploy ML (SageMaker).\nImportant Note Luôn kiểm tra và giới hạn quyền IAM trước khi chạy lambda trên account production. Đối với workshop, có thể dùng account dev/test để tránh tác động ngoài ý muốn.\n"
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Các bước cần chuẩn bị\nAWS account với quyền (Administrator) hoặc quyền để tạo: S3, IAM, Lambda, DynamoDB, CloudTrail, Config, EventBridge, SNS, CloudWatch, Glue, Athena, QuickSight, SageMaker.\nCài AWS CLI (v2)\nCài Node.js 16+ (cho frontend), Python 3.9+ (Lambda).\nOptional: Docker nếu gói package Lambda có dependency native.\n"
},
{
	"uri": "//localhost:1313/vi/3-creates3buckets/",
	"title": "Tạo S3 Buckets (Logs &amp; Reports)",
	"tags": [],
	"description": "",
	"content": "Trong bước này, chúng ta sẽ thực hiện tạo S3 với mục đích lưu CloudTrail/Config logs và báo cáo xuất ra.\nNội dung Mục đích: Lưu CloudTrail/Config logs và báo cáo xuất ra.\nBạn nhập các lệnh sau vào AWS CLI để tạo S3 Buckets\n# Tạo buckets aws s3 mb s3://compliance-logs-bucket --region ap-southeast-1 aws s3 mb s3://compliance-reports-bucket --region ap-southeast-1 # Bật versioning aws s3api put-bucket-versioning --bucket compliance-logs-bucket --versioning-configuration Status=Enabled # Enable default encryption (SSE-KMS) aws s3api put-bucket-encryption --bucket compliance-logs-bucket --server-side-encryption-configuration \u0026#39;{\u0026#34;Rules\u0026#34;:[{\u0026#34;ApplyServerSideEncryptionByDefault\u0026#34;:{\u0026#34;SSEAlgorithm\u0026#34;:\u0026#34;aws:kms\u0026#34;}}]}\u0026#39; Recommendation: Tạo KMS key riêng cho dữ liệu compliance nếu cần chính sách tách quyền.\n"
},
{
	"uri": "//localhost:1313/vi/4-cloudtrailawsconfig/",
	"title": "Bật CloudTrail, AWS Config, GuardDuty",
	"tags": [],
	"description": "",
	"content": "Với CloudTrail, AWS Config, GuardDuty chúng ta có thể theo dõi hành vi và cấu hình hạ tầng, đảm bảo compliance \u0026amp; phát hiện xâm nhập.\nTrong phần này chúng ta sẽ tiến hành bật CloudTrail, AWS Config và GuardDuty\nNội dung: CloudTrail (multi-region):\naws cloudtrail create-trail --name compliance-trail --s3-bucket-name compliance-logs-bucket --is-multi-region-trail aws cloudtrail start-logging --name compliance-trail AWS Config: Thiết lập recorder để ghi configuration changes. (Console recommended for first-time setup — chọn All resources, output S3). GuardDuty: Bật dịch vụ để phát hiện suspicious behavior:\naws guardduty create-detector --enable "
},
{
	"uri": "//localhost:1313/vi/5-dynamodbtables/",
	"title": "Tạo DynamoDB Tables",
	"tags": [],
	"description": "",
	"content": "DynamoDB sẽ lưu trữ thông tin vi phạm (violations) hoặc các sự kiện audit được xử lý từ CloudTrail.\naws dynamodb create-table --table-name ComplianceRules \\ --attribute-definitions AttributeName=rule_id,AttributeType=S \\ --key-schema AttributeName=rule_id,KeyType=HASH \\ --billing-mode PAY_PER_REQUEST aws dynamodb create-table --table-name AuditResults \\ --attribute-definitions AttributeName=audit_id,AttributeType=S AttributeName=resource_id,AttributeType=S \\ --key-schema AttributeName=audit_id,KeyType=HASH \\ --global-secondary-indexes \u0026#39;[{\u0026#34;IndexName\u0026#34;:\u0026#34;ResourceIndex\u0026#34;,\u0026#34;KeySchema\u0026#34;:[{\u0026#34;AttributeName\u0026#34;:\u0026#34;resource_id\u0026#34;,\u0026#34;KeyType\u0026#34;:\u0026#34;HASH\u0026#34;}],\u0026#34;Projection\u0026#34;:{\u0026#34;ProjectionType\u0026#34;:\u0026#34;ALL\u0026#34;}}]\u0026#39; \\ --billing-mode PAY_PER_REQUEST "
},
{
	"uri": "//localhost:1313/vi/6-gluecrawathena/",
	"title": "Thiết lập Glue Crawler &amp; Athena",
	"tags": [],
	"description": "",
	"content": "Xem thêm chi tiết thiết lập Glue Crawler \u0026amp; Athena\nTạo Glue Crawler trỏ tới s3://compliance-logs-bucket/CloudTrail/ để populate Data Catalog.\nTrong Athena, sử dụng database do Glue tạo ra hoặc tạo table thủ công nếu thích. Kiểm tra nhanh:\nSELECT eventTime, eventName, userIdentity.userName, awsRegion FROM cloudtrail_logs LIMIT 10; "
},
{
	"uri": "//localhost:1313/vi/7-iamroles-policies/",
	"title": "Tạo IAM Roles &amp; Policies",
	"tags": [],
	"description": "",
	"content": "Role: lambda-compliance-role (trust policy):\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [{\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Principal\u0026#34;:{\u0026#34;Service\u0026#34;:\u0026#34;lambda.amazonaws.com\u0026#34;},\u0026#34;Action\u0026#34;:\u0026#34;sts:AssumeRole\u0026#34;}] } Inline policy — Lambda:\n{ \u0026#34;Version\u0026#34;:\u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;:[ {\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Action\u0026#34;:[\u0026#34;s3:GetObject\u0026#34;,\u0026#34;s3:PutObject\u0026#34;],\u0026#34;Resource\u0026#34;:[\u0026#34;arn:aws:s3:::compliance-logs-bucket/*\u0026#34;,\u0026#34;arn:aws:s3:::compliance-reports-bucket/*\u0026#34;]}, {\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Action\u0026#34;:[\u0026#34;dynamodb:PutItem\u0026#34;,\u0026#34;dynamodb:GetItem\u0026#34;,\u0026#34;dynamodb:Query\u0026#34;],\u0026#34;Resource\u0026#34;:[\u0026#34;arn:aws:dynamodb:ap-southeast-1:ACCOUNT_ID:table/AuditResults\u0026#34;,\u0026#34;arn:aws:dynamodb:ap-southeast-1:ACCOUNT_ID:table/ComplianceRules\u0026#34;]}, {\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Action\u0026#34;:[\u0026#34;logs:CreateLogGroup\u0026#34;,\u0026#34;logs:CreateLogStream\u0026#34;,\u0026#34;logs:PutLogEvents\u0026#34;],\u0026#34;Resource\u0026#34;:\u0026#34;*\u0026#34;}, {\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Action\u0026#34;:[\u0026#34;sns:Publish\u0026#34;],\u0026#34;Resource\u0026#34;:\u0026#34;*\u0026#34;}, {\u0026#34;Effect\u0026#34;:\u0026#34;Allow\u0026#34;,\u0026#34;Action\u0026#34;:[\u0026#34;sagemaker:InvokeEndpoint\u0026#34;],\u0026#34;Resource\u0026#34;:\u0026#34;*\u0026#34;} ] } Thay ACCOUNT_ID bằng account ID của bạn.\n"
},
{
	"uri": "//localhost:1313/vi/8-createdeploylambdafunctions/",
	"title": "Viết &amp; Deploy Lambda functions",
	"tags": [],
	"description": "",
	"content": "Chia thành 3 Lambda chính:\nAudit Processor: parse CloudTrail/Config logs, áp rule, insert violation vào DynamoDB, publish metric/alert.\nRisk Engine: rule-based scoring hoặc invoke SageMaker endpoint.\nReport Generator: chạy Athena query, tạo CSV/PDF, lưu S3 và/hoặc trigger QuickSight refresh.\n7.1 Package \u0026amp; deploy (CLI ghép ví dụ): # Packaging mkdir package \u0026amp;\u0026amp; cd package pip install -r ../requirements.txt -t . cp ../audit_processor.py . zip -r ../audit_processor.zip . # Create Lambda aws lambda create-function --function-name audit-processor \\ --runtime python3.9 --role arn:aws:iam::ACCOUNT_ID:role/lambda-compliance-role \\ --handler audit_processor.lambda_handler --zip-file fileb://audit_processor.zip --timeout 120 --memory-size 512 7.2 Audit Processor (skeleton) — key points: Input: S3 ObjectCreated event (CloudTrail delivery) hoặc scheduled run.\nSteps:\nTải object từ S3.\nParse CloudTrail JSON events.\nFor each event: evaluate rules from ComplianceRules table.\nNếu violation: put item vào AuditResults, publish CloudWatch metric ViolationCount, gửi SNS nếu severity cao. Skeleton snippet:\nimport json, boto3 s3 = boto3.client(\u0026#39;s3\u0026#39;) ddb = boto3.resource(\u0026#39;dynamodb\u0026#39;) cloudwatch = boto3.client(\u0026#39;cloudwatch\u0026#39;) sns = boto3.client(\u0026#39;sns\u0026#39;) RULES_TABLE = \u0026#39;ComplianceRules\u0026#39; RESULTS_TABLE = \u0026#39;AuditResults\u0026#39; def lambda_handler(event, context): # parse S3 event -\u0026gt; get object key -\u0026gt; read CloudTrail # evaluate rules -\u0026gt; write to DynamoDB -\u0026gt; publish metric return {\u0026#39;status\u0026#39;:\u0026#39;ok\u0026#39;} 7.3 Risk Engine (approach): Tùy chọn A: chấm điểm dựa trên quy tắc trong Lambda (khởi động nhanh).\nTùy chọn B: gọi endpoint SageMaker để chấm điểm rủi ro dựa trên máy học (yêu cầu dữ liệu huấn luyện). Invoke SageMaker example:\nsm = boto3.client(\u0026#39;sagemaker-runtime\u0026#39;) resp = sm.invoke_endpoint(EndpointName=\u0026#39;risk-endpoint\u0026#39;, ContentType=\u0026#39;application/json\u0026#39;, Body=json.dumps(payload)) score = float(resp[\u0026#39;Body\u0026#39;].read().decode(\u0026#39;utf-8\u0026#39;)) 7.4 Report Generator (Athena → S3): Bắt đầu truy vấn Athena để tạo tệp CSV\nChờ truy vấn hoàn tất thành công, sao chép kết quả vào compliance-reports-bucket\n"
},
{
	"uri": "//localhost:1313/vi/9-eventbridgerules/",
	"title": "Thiết lập EventBridge rules",
	"tags": [],
	"description": "",
	"content": "CloudTrail (multi-region): Use-case: Kích hoạt Audit Processor khi CloudTrail gửi nhật ký hoặc khi các lệnh gọi API cụ thể xảy ra (PutBucketPolicy, CreateUser, AttachRolePolicy\u0026hellip;)\nVí dụ về quy tắc (tạo đối tượng S3 thông qua CloudTrail):\naws events put-rule --name \u0026#34;S3ObjectCreatedCompliance\u0026#34; --event-pattern \u0026#39;{\u0026#34;source\u0026#34;:[\u0026#34;aws.s3\u0026#34;],\u0026#34;detail-type\u0026#34;:[\u0026#34;AWS API Call via CloudTrail\u0026#34;],\u0026#34;detail\u0026#34;:{\u0026#34;eventName\u0026#34;:[\u0026#34;PutObject\u0026#34;,\u0026#34;CompleteMultipartUpload\u0026#34;]}}\u0026#39; aws events put-targets --rule S3ObjectCreatedCompliance --targets \u0026#39;Id\u0026#39;=\u0026#39;1\u0026#39;,\u0026#39;Arn\u0026#39;=\u0026#39;arn:aws:lambda:ap-southeast-1:ACCOUNT_ID:function:audit-processor\u0026#39; "
},
{
	"uri": "//localhost:1313/vi/10-cloudwatchmetricsalarmssns/",
	"title": "CloudWatch Metrics, Alarms &amp; SNS",
	"tags": [],
	"description": "",
	"content": " Tạo SNS topic compliance-alerts và subscribe email/Slack webhook. aws sns create-topic --name compliance-alerts aws sns subscribe --topic-arn arn:aws:sns:ap-southeast-1:ACCOUNT_ID:compliance-alerts --protocol email --notification-endpoint you@example.com Trong Lambda, publish metric: cloudwatch.put_metric_data(Namespace=\u0026#39;Compliance\u0026#39;, MetricData=[{\u0026#39;MetricName\u0026#39;:\u0026#39;ViolationCount\u0026#39;,\u0026#39;Value\u0026#39;:1,\u0026#39;Unit\u0026#39;:\u0026#39;Count\u0026#39;}]) Create alarm (threshold = 1 violation): aws cloudwatch put-metric-alarm --alarm-name HighViolationCount --metric-name ViolationCount --namespace \u0026#34;Compliance\u0026#34; --statistic Sum --period 300 --threshold 1 --comparison-operator GreaterThanOrEqualToThreshold --evaluation-periods 1 --alarm-actions arn:aws:sns:ap-southeast-1:ACCOUNT_ID:compliance-alerts "
},
{
	"uri": "//localhost:1313/vi/11-quicksight/",
	"title": "QuickSight — Tạo Dashboard",
	"tags": [],
	"description": "",
	"content": " Bật QuickSight cho account và gán permissions (xem thêm chi về QuickSight.)\nData source: Athena (dùng Glue Data Catalog) hoặc trực tiếp S3 CSV.\nTạo visuals: violation over time, top resources by violations, remediation status, risk distribution.\nLên lịch refresh dataset (nếu cần).\n"
},
{
	"uri": "//localhost:1313/vi/12-frontendreactjsdeployment/",
	"title": "Frontend (ReactJS) Deployment",
	"tags": [],
	"description": "",
	"content": " Build frontend: npm install npm run build Deploy static files đến S3: aws s3 sync build/ s3://compliance-frontend-bucket --delete (Optional) Configure CloudFront + ACM for HTTPS. "
},
{
	"uri": "//localhost:1313/vi/13-testingvalidation/",
	"title": "Testing &amp; Validation",
	"tags": [],
	"description": "",
	"content": " Tạo vi phạm tuân thủ — ví dụ: biến một S3 bucket thành public hoặc thay đổi policy.\nCloudTrail ghi nhận sự kiện.\nEventBridge kích hoạt Lambda (Audit Processor).\nLambda ghi violation vào DynamoDB hoặc S3.\nCloudWatch metric ViolationCount tăng.\nSNS gửi alert (email/SMS).\nQuickSight/dashboard cập nhật phản ánh vi phạm.\n# Giả lập upload file CloudTrail để test aws s3 cp sample_cloudtrail_event.json s3://compliance-logs-bucket/CloudTrail/test-event.json Verify Steps\nCloudWatch Logs: Vào AWS Console → CloudWatch → Logs → tìm log group /aws/lambda/audit-processor (ví dụ) → kiểm tra Log Stream gần nhất để thấy Lambda đã xử lý event chưa.\nDynamoDB: Chạy lệnh hoặc xem trong Console để xác nhận bản ghi violation đã được ghi:\naws dynamodb query \\ --table-name AuditResults \\ --index-name ResourceIndex \\ --key-condition-expression \u0026#34;resource_id = :r\u0026#34; \\ --expression-attribute-values \u0026#39;{\u0026#34;:r\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;arn:aws:s3:::example-bucket\u0026#34;}}\u0026#39; CloudWatch Metrics \u0026amp; Alarms: Vào Metrics → namespace “Compliance” → kiểm tra ViolationCount. Xác nhận Alarm HighViolationCount chuyển trạng thái thành ALARM.\nSNS Alerts: Kiểm tra email/SMS hoặc Slack webhook có nhận được cảnh báo chưa. Bạn cũng có thể kiểm tra bằng CLI:\naws sns list-subscriptions \\ --query \u0026#34;Subscriptions[?TopicArn==\u0026#39;arn:aws:sns:ap-southeast-1:ACCOUNT_ID:compliance-alerts\u0026#39;]\u0026#34; QuickSight Dashboard: Vào QuickSight → Refresh dataset nếu cần → mở dashboard để xác nhận dữ liệu mới đã xuất hiện. Acceptance Criteria\nLambda xử lý event \u0026lt; 30 giây.\nViolation được ghi nhận trong DynamoDB \u0026lt; 60 giây.\nSNS alert được gửi trong vòng \u0026lt; 2 phút.\nQuickSight phản ánh dữ liệu mới trong vòng refresh window (thường ≤ 5 phút).\n"
},
{
	"uri": "//localhost:1313/vi/14-cleanupresorces/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "13.1 – Delete Lambda Functions\naws lambda delete-function --function-name audit-processor aws lambda delete-function --function-name risk-engine aws lambda delete-function --function-name report-generator 13.2 – Remove EventBridge Rules \u0026amp; Targets\naws events remove-targets --rule S3ObjectCreatedCompliance --ids 1 aws events delete-rule --name S3ObjectCreatedCompliance 13.3 – Delete SNS Topic\naws sns delete-topic --topic-arn arn:aws:sns:ap-southeast-1:ACCOUNT_ID:compliance-alerts 13.4 – Delete QuickSight Resources\nThường cần vào QuickSight Console → Manage data → Delete datasets, dashboards manually. 13.5 – Delete Glue Crawlers / Databases\naws glue delete-crawler --name compliance-logs-crawler aws glue delete-database --name compliance_db 13.6 – Cleanup Athena Query Output\nXóa folder kết quả query trong S3 buckets nếu có.\nDrop Athena databases/tables nếu cần. 13.7 – Delete DynamoDB Tables\naws dynamodb delete-table --table-name AuditResults aws dynamodb delete-table --table-name ComplianceRules 13.8 – Empty \u0026amp; Delete S3 Buckets Nếu bucket chưa enable phiên bản (versioning):\naws s3 rm s3://compliance-logs-bucket --recursive aws s3 rb s3://compliance-logs-bucket Nếu đã versioning, cần xóa từng version hoặc dùng script đặc biệt để làm sạch.\n13.9 – Disable CloudTrail, Config, GuardDuty\r```bash\raws cloudtrail stop-logging --name compliance-trail\raws cloudtrail delete-trail --name compliance-trail\raws configservice stop-configuration-recorder --configuration-recorder-name default\rDET_ID=$(aws guardduty list-detectors --query \u0026#39;DetectorIds[0]\u0026#39; --output text)\raws guardduty delete-detector --detector-id $DET_ID 13.10 – Remove IAM Roles \u0026amp; Policies\naws iam delete-role-policy --role-name lambda-compliance-role --policy-name LambdaComplianceInlinePolicy aws iam delete-role --role-name lambda-compliance-role 13.11 – Final Verification \u0026amp; Billing Vào AWS Console → check rằng các resource (S3, Lambda, DynamoDB, QuickSight\u0026hellip;) đã bị xóa.\nKiểm tra AWS Billing Dashboard để đảm bảo không còn chi phí bất thường\n"
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]